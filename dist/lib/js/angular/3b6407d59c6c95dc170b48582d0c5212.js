(function(){angular.module("validation",["validation.provider","validation.directive"]),angular.module("validation.provider",[]),angular.module("validation.directive",["validation.provider"])}).call(this),function(){function e(){var e,t,i,n,r,a=this,s=function(a){e=a,t=e.get("$rootScope"),i=e.get("$http"),n=e.get("$q"),r=e.get("$timeout")},o={},l=null,u={};this.setExpression=function(e){return angular.extend(o,e),a},this.getExpression=function(e){return o[e]},this.setDefaultMsg=function(e){return angular.extend(u,e),a},this.getDefaultMsg=function(e){return u[e]},this.setValidMethod=function(e){l=e},this.getValidMethod=function(){return l},this.setErrorHTML=function(e){return e.constructor===Function?(a.getErrorHTML=e,a):void 0},this.getErrorHTML=function(e){return'<p class="validation-invalid">'+e+"</p>"},this.setSuccessHTML=function(e){return e.constructor===Function?(a.getSuccessHTML=e,a):void 0},this.getSuccessHTML=function(e){return'<p class="validation-valid">'+e+"</p>"},this.showSuccessMessage=!0,this.showErrorMessage=!0,this.checkValid=function(e){return!(!e||!e.$valid)},this.validate=function(e){var i=n.defer(),s=0;if(void 0===e)return console.error("This is not a regular Form name scope"),i.reject("This is not a regular Form name scope"),i.promise;if(e.validationId)t.$broadcast(e.$name+"submit-"+e.validationId,s++);else if(e.constructor===Array)for(var o in e)t.$broadcast(e[o].$name+"submit-"+e[o].validationId,s++);else for(var l in e)"$"!==l[0]&&e[l].hasOwnProperty("$dirty")&&t.$broadcast(l+"submit-"+e[l].validationId,s++);return i.promise.success=function(e){return i.promise.then(function(t){e(t)}),i.promise},i.promise.error=function(e){return i.promise.then(null,function(t){e(t)}),i.promise},r(function(){a.checkValid(e)?i.resolve("success"):i.reject("error")}),i.promise},this.validCallback=null,this.invalidCallback=null,this.resetCallback=null,this.reset=function(e){if(void 0===e)return void console.error("This is not a regular Form name scope");if(e.validationId)t.$broadcast(e.$name+"reset-"+e.validationId);else if(e.constructor===Array)for(var i in e)t.$broadcast(e[i].$name+"reset-"+e[i].validationId);else for(var n in e)"$"!==n[0]&&e[n].hasOwnProperty("$dirty")&&t.$broadcast(n+"reset-"+e[n].validationId)},this.addMsgElement=function(e){return e.after("<span></span>")},this.getMsgElement=function(e){return e.next()},this.$get=["$injector",function(e){return s(e),{setValidMethod:this.setValidMethod,getValidMethod:this.getValidMethod,setErrorHTML:this.setErrorHTML,getErrorHTML:this.getErrorHTML,setSuccessHTML:this.setSuccessHTML,getSuccessHTML:this.getSuccessHTML,setExpression:this.setExpression,getExpression:this.getExpression,setDefaultMsg:this.setDefaultMsg,getDefaultMsg:this.getDefaultMsg,showSuccessMessage:this.showSuccessMessage,showErrorMessage:this.showErrorMessage,checkValid:this.checkValid,validate:this.validate,validCallback:this.validCallback,invalidCallback:this.invalidCallback,resetCallback:this.resetCallback,reset:this.reset,addMsgElement:this.addMsgElement,getMsgElement:this.getMsgElement}}]}angular.module("validation.provider").provider("$validation",e)}.call(this),function(){function e(e){var t=e.get("$validation"),i=e.get("$timeout"),n=e.get("$parse");return{link:function(e,r,a){var s=n(a.validationReset)(e);i(function(){r.on("click",function(e){e.preventDefault(),t.reset(s)})})}}}angular.module("validation.directive").directive("validationReset",e),e.$inject=["$injector"]}.call(this),function(){function e(e){var t=e.get("$validation"),i=e.get("$timeout"),n=e.get("$parse");return{priority:1,require:"?ngClick",link:function(e,r,a){var s=n(a.validationSubmit)(e);i(function(){r.off("click"),r.on("click",function(i){i.preventDefault(),t.validate(s).success(function(){n(a.ngClick)(e)})})})}}}angular.module("validation.directive").directive("validationSubmit",e),e.$inject=["$injector"]}.call(this),function(){function e(e){var t=e.get("$validation"),i=e.get("$q"),n=e.get("$timeout"),r=e.get("$compile"),a=e.get("$parse"),s=function(e,i,n,s,o,l){var u,c=i||t.getDefaultMsg(n).success,d=a("success"),g=l.messageId,v=l.validationGroup;return u=g||v?angular.element(document.querySelector("#"+(g||v))):t.getMsgElement(e),e.attr("no-validation-message")?u.css("display","none"):t.showSuccessMessage&&c?(u.html("").append(r(t.getSuccessHTML(c,e,l))(s)),u.css("display","")):u.css("display","none"),o.$setValidity(o.$name,!0),d&&d({message:c}),t.validCallback&&t.validCallback(e),!0},o=function(e,i,n,s,o,l){var u,c=i||t.getDefaultMsg(n).error,d=a("error"),g=l.messageId,v=l.validationGroup;return u=g||v?angular.element(document.querySelector("#"+(g||v))):t.getMsgElement(e),e.attr("no-validation-message")?u.css("display","none"):t.showErrorMessage&&c?(u.html("").append(r(t.getErrorHTML(c,e,l))(s)),u.css("display","")):u.css("display","none"),o.$setValidity(o.$name,!1),d&&d({message:c}),t.invalidCallback&&t.invalidCallback(e),!1},l=function(e,t,i,n){var r,a=i.validationGroup,s=document.querySelectorAll("*[validation-group="+a+"]");n.$setValidity(n.$name,!1);for(var o=0,l=s.length;l>o;o++)if(r=angular.element(s[o]),r.hasClass("ng-valid")&&r[0]!==t[0])return!0;return!1},u={},c=function(e,n,r,a,u,d){var g=u.slice(0),v=g[0].trim(),f=v.indexOf("="),h=-1===f?v:v.substr(0,f),m=-1===f?null:v.substr(f+1),p=g.slice(1),$=h+"SuccessMessage",M=h+"ErrorMessage",b=t.getExpression(h),E=r.validationGroup,y={success:function(){return s(n,r[$],h,e,a,r),p.length?c(e,n,r,a,p,d):!0},error:function(){return o(n,r[M],h,e,a,r)}};return void 0===b?(console.error('You are using undefined validator "%s"',h),p.length?c(e,n,r,a,p,d):void 0):b.constructor===Function?i.all([t.getExpression(h)(d,e,n,r,m)]).then(function(t){return t&&t.length>0&&t[0]?y.success():E?void(l(e,n,r,a)||y.error()):y.error()},function(){return y.error()}):b.constructor!==RegExp?y.error():void 0!==d&&null!==d?t.getExpression(h).test(d)?y.success():y.error():E?void(l(e,n,r,a)||y.error()):y.error()},d=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},g=function(){return d()+d()+d()+d()};return{restrict:"A",require:"ngModel",link:function(e,i,r,a){var s,o=r.validator,l=r.messageId,d=r.validationGroup,v=r.validMethod,f=r.ngModel,h=function(){},m=o.split(","),p=a.validationId=g();return"boolean"==typeof e.initialValidity&&(s=e.initialValidity),l||d||t.addMsgElement(i),a.$setValidity(a.$name,s),e.$on(a.$name+"reset-"+p,function(){h(),n(function(){a.$setViewValue(""),a.$setPristine(),a.$setValidity(a.$name,void 0),a.$render(),l||d?angular.element(document.querySelector("#"+(l||d))).html(""):t.getMsgElement(i).html(""),t.resetCallback&&t.resetCallback(i)})}),v=angular.isUndefined(v)?t.getValidMethod():v,e.$on(a.$name+"submit-"+p,function(t,s){var o=a.$viewValue,l=!1;l=c(e,i,r,a,m,o),"submit"===v&&(h(),h=e.$watch(function(){return e.$eval(f)},function(t,n){t!==n&&(void 0!==t&&null!==t||(t=""),l=c(e,i,r,a,m,t))}));var d=function(e){e?delete u[s]:(u[s]=i[0],n(function(){u[Math.min.apply(null,Object.keys(u))].focus()},0))};l.constructor===Object?l.then(d):d(l)}),"blur"===v?void i.bind("blur",function(){var t=e.$eval(f);e.$apply(function(){c(e,i,r,a,m,t)})}):void("submit"!==v&&"submit-only"!==v&&(e.$watch(function(){return e.$eval(f)},function(n){if(a.$pristine&&a.$viewValue)a.$setViewValue(a.$viewValue);else if(a.$pristine)return void(l||d?angular.element(document.querySelector("#"+(l||d))).html(""):t.getMsgElement(i).html(""));c(e,i,r,a,m,n)}),n(function(){r.$observe("noValidationMessage",function(e){var n;n=l||d?angular.element(document.querySelector("#"+(l||d))):t.getMsgElement(i),"true"===e||e===!0?n.css("display","none"):"false"!==e&&e!==!1||n.css("display","block")})})))}}}angular.module("validation.directive").directive("validator",e),e.$inject=["$injector"]}.call(this);